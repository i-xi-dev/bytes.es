<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>File â†’ data URL</title>
    <script type="module">
      import { ByteSequence } from "https://cdn.skypack.dev/@i-xi-dev/bytes";

      document.getElementById("input2").addEventListener("change", async (event) => {
        const type = document.getElementById("input1").value;
        if (type) {
          const file = event.target.files[0];
          if (file) {
            const bytes = await ByteSequence.fromBlob(file);
            document.getElementById("output1").value = bytes.toDataURL({ type });
          }
        }

      }, { passive: true, })
    </script>
  </head>
  <body>
    <fieldset>
      <legend>Input</legend>
      <dl>
        <div>
          <dt>MIME type</dt>
          <dd><input type="text" id="input1" value="image/png" /></dd>
        </div>
        <div>
          <dt>file</dt>
          <dd><input type="file" id="input2" /></dd>
        </div>
      </dl>
    </fieldset>

    <fieldset>
      <legend>Output</legend>
      <dl>
        <div>
          <dt>data URL</dt>
          <dd><textarea readonly id="output1"></textarea></dd>
        </div>
      </dl>
    </fieldset>
  </body>
</html>
