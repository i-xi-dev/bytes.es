<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>test</title>
    <script type="module">
import test from "../../test.mjs";
import { UsAscii } from "../../../../dist/text_encoding/us_ascii.js";

test.it("UsAscii(string)", () => {
  test.assert.strictEqual([...UsAscii.encode("")].join(","), "");
  test.assert.strictEqual([...UsAscii.encode("\u0000\u007F")].join(","), "0,127");

  test.assert.throws(() => {
    UsAscii.encode("\u0080");
  }, {
    message: "encode error",
  });

});

test.it("UsAscii(string, Object)", () => {
  // fallback
  test.assert.throws(() => {
    UsAscii.encode("\u0080", {fallback: "exception"});
  }, {
    message: "encode error",
  });
  test.assert.strictEqual([...UsAscii.encode("\u0080", {fallback: "replacement"})].join(","), "63");

});

test.exec();
    </script>
  </head>
  <body>
  </body>
</html>
