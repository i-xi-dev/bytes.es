<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>test</title>
    <script type="module">
import test from "../../test.mjs";
import { TextEncoding } from "../../../../dist/index.js";
const UsAscii = TextEncoding.for("US-ASCII");

test.it("decode(Uint8Array)", () => {
  test.assert.strictEqual(UsAscii.decode(Uint8Array.of()), "");
  test.assert.strictEqual(UsAscii.decode(Uint8Array.of(0x00,0x7F)), "\u0000\u007F");

  test.assert.throws(() => {
    UsAscii.decode(Uint8Array.of(0x80));
  }, {
    message: "decode error",
  });
  test.assert.throws(() => {
    UsAscii.decode(Uint8Array.of(0xFF));
  }, {
    message: "decode error",
  });

  test.assert.throws(() => {
    UsAscii.decode(Uint8Array.of(0xEF,0xBB,0xBF,49));
  }, {
    message: "decode error",
  });

});

test.it("decode(Uint8Array, Object)", () => {
  // fallback
  test.assert.throws(() => {
    UsAscii.decode(Uint8Array.of(0x80), {fallback:"exception"});
  }, {
    message: "decode error",
  });
  test.assert.strictEqual(UsAscii.decode(Uint8Array.of(0x80), {fallback:"replacement"}), "\u{FFFD}");

});

test.exec();
    </script>
  </head>
  <body>
  </body>
</html>
