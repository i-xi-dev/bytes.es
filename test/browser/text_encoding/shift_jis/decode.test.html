<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>test</title>
    <script type="module">
import test from "../../test.mjs";
import { TextEncoding } from "../../../../dist/index.js";
const ShiftJis = TextEncoding.for("Shift_JIS");

test.it("decode(Uint8Array)", () => {
  test.assert.strictEqual(ShiftJis.decode(Uint8Array.of()), "");
  test.assert.strictEqual(ShiftJis.decode(Uint8Array.of(0,1,2,3,4)), "\u0000\u0001\u0002\u0003\u0004");
  test.assert.strictEqual(ShiftJis.decode(Uint8Array.of(135,96)), "ãŒ”");

  test.assert.throws(() => {
    ShiftJis.decode(Uint8Array.of(0xA0));
  }, {
    message: "decode error",
  });
  test.assert.strictEqual(ShiftJis.decode(Uint8Array.of(0x1A)), "\u001A");

});

test.it("decode(Uint8Array, Object)", () => {
  // fallback
  test.assert.throws(() => {
    ShiftJis.decode(Uint8Array.of(0xA0), {fallback:"exception"});
  }, {
    message: "decode error",
  });
  test.assert.strictEqual(ShiftJis.decode(Uint8Array.of(0xA0), {fallback:"replacement"}), "\uFFFD");
  test.assert.strictEqual(ShiftJis.decode(Uint8Array.of(0x1A), {fallback:"exception"}), "\u001A");

});

test.exec();
    </script>
  </head>
  <body>
  </body>
</html>
