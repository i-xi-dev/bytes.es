<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>test</title>
    <script type="module">
import test from "../../test.mjs";
import { TextEncoding } from "../../../../dist/index.js";
const Utf8 = TextEncoding.for("UTF-8");

test.it("encode(string)", () => {
  test.assert.strictEqual([...Utf8.encode("")].join(","), "");
  test.assert.strictEqual([...Utf8.encode("1あ3\u{A9}\n\u{2000B}abc\na")].join(","), "49,227,129,130,51,194,169,10,240,160,128,139,97,98,99,10,97");
  test.assert.strictEqual([...Utf8.encode("\uFEFF\u0031\u0033")].join(","), "239,187,191,49,51");
  test.assert.strictEqual([...Utf8.encode("1あ3\u{A9}")].join(","), "49,227,129,130,51,194,169");
  //test.assert.strictEqual([...Utf8.encode("1\uFFFD\uFFFD3")].join(","), "49,130,160,51");

  test.assert.strictEqual([...Utf8.encode("\uFEFF1あ3\u{A9}")].join(","), "239,187,191,49,227,129,130,51,194,169");

});

test.it("encode(string, Object)", () => {
  // addBom
  test.assert.strictEqual([...Utf8.encode("1あ3\u{A9}", {addBom:true})].join(","), "239,187,191,49,227,129,130,51,194,169");
  test.assert.strictEqual([...Utf8.encode("\uFEFF1あ3\u{A9}", {addBom:true})].join(","), "239,187,191,49,227,129,130,51,194,169");

});

test.exec();
    </script>
  </head>
  <body>
  </body>
</html>
